# 1. 컨테이너 실행 (PowerShell 방식)
      - name: Run Test Container
        run: |
          docker rm -f app-test 2> $null
          docker run -d --name app-test -p 5001:5000 my-app:test

      # 2. 서버 대기 (PowerShell 방식)
      - name: Wait for Server
        run: Start-Sleep -Seconds 5

      # 3. 테스트 로직 (완전한 PowerShell 문법)
      - name: Execute Test Logic
        run: |
          Write-Host "Testing Core Function..."
          try {
            $Response = Invoke-RestMethod -Uri "http://localhost:5001/core" -Method Get
            Write-Host "   Response: $Response"
            
            if ($Response -eq "Success") {
              Write-Host "   Core Function Passed!" -ForegroundColor Green
            } else {
              Write-Error "   Core Function Failed. Expected 'Success', got '$Response'"
              exit 1
            }
          } catch {
            Write-Error "   Connection Failed: $_"
            exit 1
          }

          Write-Host "Testing Legacy Feature..."
          try {
            $Response = Invoke-RestMethod -Uri "http://localhost:5001/legacy" -Method Get
            Write-Host "   Response: $Response"

            if ($Response -eq "Response A") {
              Write-Host "   Legacy Feature Passed!" -ForegroundColor Green
            } else {
              Write-Error "   Legacy Feature Failed. Expected 'Response A', got '$Response'"
              exit 1
            }
          } catch {
            Write-Error "   Connection Failed: $_"
            exit 1
          }